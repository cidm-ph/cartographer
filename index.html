<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="cartographer is a framework for easily matching spatial data when
    you have a list of standardised place names. You might have a data frame
    that came from a spreadsheet tracking some data by suburb or state. This
    package can convert it into a spatial data frame ready for plotting. The
    actual map data is provided by other packages (or your own code) that
    register the data with cartographer.">
<title>Turn Place Names into Map Data • cartographer</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Turn Place Names into Map Data">
<meta property="og:description" content="cartographer is a framework for easily matching spatial data when
    you have a list of standardised place names. You might have a data frame
    that came from a spreadsheet tracking some data by suburb or state. This
    package can convert it into a spatial data frame ready for plotting. The
    actual map data is provided by other packages (or your own code) that
    register the data with cartographer.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">cartographer</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cidm-ph/cartographer/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="cartographer">cartographer<a class="anchor" aria-label="anchor" href="#cartographer"></a>
</h1></div>
<!-- badges: start -->

<p>Cartographer makes it easy to visualise your data on a map when you have a column in the data that names a place/region. The map data itself is provided by other packages or your own code.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install cartographer like so:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  cidmph <span class="op">=</span> <span class="st">'https://cidm-ph.r-universe.dev'</span>,</span>
<span>  CRAN <span class="op">=</span> <span class="st">'https://cloud.r-project.org'</span><span class="op">)</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'cartographer'</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="map-data">Map data<a class="anchor" aria-label="anchor" href="#map-data"></a>
</h2>
<p>Packages can register map data with cartographer:</p>
<ul>
<li>
<code>{nswgeo}</code> - map data of New South Wales, Australia.</li>
</ul>
<p>Alternatively, you can either register your own data using <code><a href="reference/register_map.html">register_map()</a></code>.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>Cartographer comes with one example dataset registered (the map of North Carolina provided by the <a href="https://r-spatial.github.io/sf/" class="external-link">sf</a> package where the feature names correspond to counties).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/cidm-ph/cartographer" class="external-link">cartographer</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># list registered datasets</span></span>
<span><span class="fu"><a href="reference/feature_types.html">feature_types</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "sf.nc"</span></span>
<span></span>
<span><span class="co"># list feature names in one of the datasets</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fu"><a href="reference/feature_names.html">feature_names</a></span><span class="op">(</span><span class="st">"sf.nc"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Ashe"        "Alleghany"   "Surry"       "Currituck"   "Northampton"</span></span>
<span><span class="co">#&gt; [6] "Hertford"</span></span></code></pre></div>
<p>Our example dataset has a column called <code>county</code> with the name of the county and a column <code>type</code> that is one of two values. We’d like to draw a map that shows us where the entries are by type.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">nc_type_example_1</span><span class="op">)</span></span>
<span><span class="co">#&gt;    county type</span></span>
<span><span class="co">#&gt; 1  BERTIE    B</span></span>
<span><span class="co">#&gt; 2  BERTIE    A</span></span>
<span><span class="co">#&gt; 3  BERTIE    A</span></span>
<span><span class="co">#&gt; 4 PAMLICO    B</span></span>
<span><span class="co">#&gt; 5  WARREN    B</span></span>
<span><span class="co">#&gt; 6 PAMLICO    B</span></span></code></pre></div>
<p>We want to convert our data frame into a spatial data frame, then we’ll be able to use standard <a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a> tools to draw our map. Cartographer just needs to know which of its maps we’re using (<code>"sf.nc"</code>, although it’s able to guess that if we don’t specify it), and which column has the feature names (<code>county</code>):</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/add_geometry.html">add_geometry</a></span><span class="op">(</span><span class="va">nc_type_example_1</span>, <span class="va">county</span>, feature_type <span class="op">=</span> <span class="st">"sf.nc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Error in `resolve_feature_names()`:</span></span>
<span><span class="co">#&gt; ! location contains unexpected values</span></span>
<span><span class="co">#&gt; ✖ The unknown values are PAMILCO.</span></span>
<span><span class="co">#&gt; ℹ Expected sf.nc names like Ashe, Alleghany, and Surry.</span></span>
<span><span class="co">#&gt; ℹ See feature_names('sf.nc') for the full list.</span></span></code></pre></div>
<p>What happened? The matching of county names was case-insensitive, so that wasn’t the issue; it looks like our data contained a typo. One of the rows contains <code>"PAMILCO"</code> instead of <code>"PAMLICO"</code> in the <code>county</code> column.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span>, warn.conflicts <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># cleaned dataset</span></span>
<span><span class="va">nc_type_example_1_fixed</span> <span class="op">&lt;-</span></span>
<span>  <span class="va">nc_type_example_1</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>county <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_match.html" class="external-link">case_match</a></span><span class="op">(</span><span class="va">county</span>, <span class="st">"PAMILCO"</span> <span class="op">~</span> <span class="st">"PAMLICO"</span>, .default <span class="op">=</span> <span class="va">county</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/add_geometry.html">add_geometry</a></span><span class="op">(</span><span class="va">nc_type_example_1_fixed</span>, <span class="va">county</span>, feature_type <span class="op">=</span> <span class="st">"sf.nc"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 50 features and 2 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -82.07776 ymin: 34.98222 xmax: -76.50713 ymax: 36.55629</span></span>
<span><span class="co">#&gt; Geodetic CRS:  NAD27</span></span>
<span><span class="co">#&gt; First 10 features:</span></span>
<span><span class="co">#&gt;         county type                       geometry</span></span>
<span><span class="co">#&gt; 1       BERTIE    B MULTIPOLYGON (((-76.78307 3...</span></span>
<span><span class="co">#&gt; 2       BERTIE    A MULTIPOLYGON (((-76.78307 3...</span></span>
<span><span class="co">#&gt; 3       BERTIE    A MULTIPOLYGON (((-76.78307 3...</span></span>
<span><span class="co">#&gt; 4      PAMLICO    B MULTIPOLYGON (((-76.94324 3...</span></span>
<span><span class="co">#&gt; 5       WARREN    B MULTIPOLYGON (((-78.30876 3...</span></span>
<span><span class="co">#&gt; 6      PAMLICO    B MULTIPOLYGON (((-76.94324 3...</span></span>
<span><span class="co">#&gt; 7  NORTHAMPTON    B MULTIPOLYGON (((-77.21767 3...</span></span>
<span><span class="co">#&gt; 8      PAMLICO    A MULTIPOLYGON (((-76.94324 3...</span></span>
<span><span class="co">#&gt; 9      PAMLICO    B MULTIPOLYGON (((-76.94324 3...</span></span>
<span><span class="co">#&gt; 10     PAMLICO    B MULTIPOLYGON (((-76.94324 3...</span></span></code></pre></div>
<p>Now that we have our spatial geometry added, we can go ahead and plot it, adding a layer that uses the full <code>"sf.nc"</code> dataset to give us the base map:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">nc_type_example_1_fixed</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">county</span>, <span class="va">type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_geometry.html">add_geometry</a></span><span class="op">(</span><span class="va">county</span>, feature_type <span class="op">=</span> <span class="st">"sf.nc"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="reference/map_sf.html">map_sf</a></span><span class="op">(</span><span class="st">"sf.nc"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">type</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-example-basic-1.png" width="100%"></p>
<p>The package <code>{ggautomap}</code> uses cartographer to provide some new geoms that transparently attach the map data and perform some calculations like mapping our data to the middle or random points within the corresponding feature.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cidm-ph/cartographer/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cidm-ph/cartographer/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing cartographer</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Carl Suster <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-7021-9380" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://cidm-ph.r-universe.dev" class="external-link"><img src="https://cidm-ph.r-universe.dev/badges/cartographer" alt="cartographer status badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Carl Suster.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
